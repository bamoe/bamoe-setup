apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-init
data:
  init.sql: |
    DO $$
    BEGIN
      IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'bamoe-user') THEN
        CREATE ROLE "bamoe-user" WITH
          LOGIN
          SUPERUSER
          INHERIT
          CREATEDB
          CREATEROLE
          NOREPLICATION
          PASSWORD 'bamoe-pass';
      END IF;
    END
    $$;

    DO $$
    BEGIN
      IF NOT EXISTS (SELECT FROM pg_database WHERE datname = 'bamoe') THEN
        CREATE DATABASE bamoe
          WITH OWNER = "bamoe-user"
          ENCODING = 'UTF8'
          LC_COLLATE = 'en_US.utf8'
          LC_CTYPE = 'en_US.utf8'
          TABLESPACE = pg_default
          CONNECTION LIMIT = -1;
      END IF;
    END
    $$;

    GRANT ALL PRIVILEGES ON DATABASE postgres TO "bamoe-user";
    GRANT ALL PRIVILEGES ON DATABASE bamoe TO "bamoe-user";

    DO $$
    BEGIN
      IF EXISTS (SELECT FROM pg_roles WHERE rolname = 'postgres') THEN
        EXECUTE 'GRANT ALL PRIVILEGES ON DATABASE bamoe TO postgres';
      END IF;
    END
    $$;

    DO $$
    BEGIN
    --
    -- Name: audit_query; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE audit_query (
        identifier character varying(255) NOT NULL,
        graph_ql_definition character varying(5000),
        query character varying(5000)
    );


    --
    -- Name: job_execution_history_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE job_execution_history_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: job_execution_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE job_execution_log (
        id bigint NOT NULL,
        event_date timestamp(6) without time zone,
        execution_counter integer,
        expiration_time timestamp(6) without time zone,
        job_id character varying(255),
        node_instance_id character varying(255),
        priority integer,
        process_instance_id character varying(255),
        repeat_interval bigint,
        repeat_limit integer,
        retries integer,
        scheduled_id character varying(255),
        status character varying(255)
    );


    --
    -- Name: process_instance_error_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instance_error_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        parent_process_instance_id character varying(255),
        process_id character varying(255),
        process_instance_id character varying(255),
        process_type character varying(255),
        process_version character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        error_message character varying(255),
        node_definition_id character varying(255),
        node_instance_id character varying(255),
        event_user character varying(255)
    );


    --
    -- Name: process_instance_error_log_seq_id; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE process_instance_error_log_seq_id
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: process_instance_node_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instance_node_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        parent_process_instance_id character varying(255),
        process_id character varying(255),
        process_instance_id character varying(255),
        process_type character varying(255),
        process_version character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        connection character varying(255),
        event_data character varying(255),
        event_type character varying(255),
        node_definition_id character varying(255),
        node_instance_id character varying(255),
        node_name character varying(255),
        node_type character varying(255),
        sla_due_date timestamp(6) without time zone,
        work_item_id character varying(255),
        event_user character varying(255),
        CONSTRAINT process_instance_node_log_event_type_check CHECK (((event_type)::text = ANY ((ARRAY['ENTER'::character varying, 'EXIT'::character varying, 'ABORTED'::character varying, 'ASYNC_ENTER'::character varying, 'OBSOLETE'::character varying, 'SKIPPED'::character varying, 'ERROR'::character varying, 'SLA_VIOLATION'::character varying, 'STATE_UPDATED'::character varying])::text[])))
    );


    --
    -- Name: process_instance_node_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE process_instance_node_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: process_instance_state_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instance_state_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        parent_process_instance_id character varying(255),
        process_id character varying(255),
        process_instance_id character varying(255),
        process_type character varying(255),
        process_version character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        event_type character varying(255) NOT NULL,
        outcome character varying(255),
        sla_due_date timestamp(6) without time zone,
        state character varying(255),
        event_user character varying(255),
        CONSTRAINT process_instance_state_log_event_type_check CHECK (((event_type)::text = ANY ((ARRAY['ACTIVE'::character varying, 'COMPLETED'::character varying, 'SLA_VIOLATION'::character varying, 'MIGRATED'::character varying, 'STATE_UPDATED'::character varying])::text[])))
    );


    --
    -- Name: process_instance_state_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE process_instance_state_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: process_instance_state_roles_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instance_state_roles_log (
        process_instance_state_log_id bigint NOT NULL,
        role character varying(255)
    );


    --
    -- Name: process_instance_variable_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instance_variable_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        parent_process_instance_id character varying(255),
        process_id character varying(255),
        process_instance_id character varying(255),
        process_type character varying(255),
        process_version character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        variable_id character varying(255),
        variable_name character varying(255),
        variable_value text,
        event_user character varying(255)
    );


    --
    -- Name: process_instance_variable_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE process_instance_variable_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_assignment_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_assignment_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        assignment_type character varying(255),
        task_name character varying(255)
    );


    --
    -- Name: task_instance_assignment_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_assignment_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_assignment_users_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_assignment_users_log (
        task_instance_assignment_log_id bigint NOT NULL,
        user_id character varying(255)
    );


    --
    -- Name: task_instance_attachment_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_attachment_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        attachment_id character varying(255),
        attachment_name character varying(255),
        attachment_uri character varying(255),
        event_type integer
    );


    --
    -- Name: task_instance_attachment_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_attachment_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_comment_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_comment_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        comment_content character varying(1000),
        comment_id character varying(255),
        event_type integer
    );


    --
    -- Name: task_instance_comment_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_comment_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_deadline_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_deadline_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        event_type character varying(255)
    );


    --
    -- Name: task_instance_deadline_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_deadline_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_deadline_notification_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_deadline_notification_log (
        task_instance_deadline_log_id bigint NOT NULL,
        property_value character varying(255),
        property_name character varying(255) NOT NULL
    );


    --
    -- Name: task_instance_state_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_state_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        actual_user character varying(255),
        description character varying(255),
        event_type character varying(255),
        name character varying(255),
        state character varying(255)
    );


    --
    -- Name: task_instance_state_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_state_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: task_instance_variable_log; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE task_instance_variable_log (
        id bigint NOT NULL,
        business_key character varying(255),
        event_date timestamp(6) without time zone,
        event_id character varying(255),
        event_user character varying(255),
        process_instance_id character varying(255),
        user_task_definition_id character varying(255),
        user_task_instance_id character varying(255),
        variable_id character varying(255),
        variable_name character varying(255),
        variable_type character varying(255),
        variable_value text,
        CONSTRAINT task_instance_variable_log_variable_type_check CHECK (((variable_type)::text = ANY ((ARRAY['INPUT'::character varying, 'OUTPUT'::character varying])::text[])))
    );


    --
    -- Name: task_instance_variable_log_id_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE task_instance_variable_log_id_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: audit_query audit_query_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY audit_query
        ADD CONSTRAINT audit_query_pkey PRIMARY KEY (identifier);


    --
    -- Name: job_execution_log job_execution_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY job_execution_log
        ADD CONSTRAINT job_execution_log_pkey PRIMARY KEY (id);


    --
    -- Name: process_instance_error_log process_instance_error_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instance_error_log
        ADD CONSTRAINT process_instance_error_log_pkey PRIMARY KEY (id);


    --
    -- Name: process_instance_node_log process_instance_node_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instance_node_log
        ADD CONSTRAINT process_instance_node_log_pkey PRIMARY KEY (id);


    --
    -- Name: process_instance_state_log process_instance_state_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instance_state_log
        ADD CONSTRAINT process_instance_state_log_pkey PRIMARY KEY (id);


    --
    -- Name: process_instance_variable_log process_instance_variable_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instance_variable_log
        ADD CONSTRAINT process_instance_variable_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_assignment_log task_instance_assignment_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_assignment_log
        ADD CONSTRAINT task_instance_assignment_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_attachment_log task_instance_attachment_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_attachment_log
        ADD CONSTRAINT task_instance_attachment_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_comment_log task_instance_comment_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_comment_log
        ADD CONSTRAINT task_instance_comment_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_deadline_log task_instance_deadline_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_deadline_log
        ADD CONSTRAINT task_instance_deadline_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_deadline_notification_log task_instance_deadline_notification_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_deadline_notification_log
        ADD CONSTRAINT task_instance_deadline_notification_log_pkey PRIMARY KEY (task_instance_deadline_log_id, property_name);


    --
    -- Name: task_instance_state_log task_instance_state_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_state_log
        ADD CONSTRAINT task_instance_state_log_pkey PRIMARY KEY (id);


    --
    -- Name: task_instance_variable_log task_instance_variable_log_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_variable_log
        ADD CONSTRAINT task_instance_variable_log_pkey PRIMARY KEY (id);


    --
    -- Name: ix_jel_jid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_jel_jid ON job_execution_log USING btree (job_id);


    --
    -- Name: ix_jel_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_jel_pid ON job_execution_log USING btree (process_instance_id);


    --
    -- Name: ix_jel_status; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_jel_status ON job_execution_log USING btree (status);


    --
    -- Name: ix_piel_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_piel_event_date ON process_instance_error_log USING btree (event_date);


    --
    -- Name: ix_piel_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_piel_key ON process_instance_error_log USING btree (business_key);


    --
    -- Name: ix_piel_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_piel_pid ON process_instance_error_log USING btree (process_instance_id);


    --
    -- Name: ix_pinl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pinl_event_date ON process_instance_node_log USING btree (event_date);


    --
    -- Name: ix_pinl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pinl_key ON process_instance_node_log USING btree (business_key);


    --
    -- Name: ix_pinl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pinl_pid ON process_instance_node_log USING btree (process_instance_id);


    --
    -- Name: ix_pisl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pisl_event_date ON process_instance_state_log USING btree (event_date);


    --
    -- Name: ix_pisl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pisl_key ON process_instance_state_log USING btree (business_key);


    --
    -- Name: ix_pisl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pisl_pid ON process_instance_state_log USING btree (process_instance_id);


    --
    -- Name: ix_pisl_state; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pisl_state ON process_instance_state_log USING btree (state);


    --
    -- Name: ix_pivl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pivl_event_date ON process_instance_variable_log USING btree (event_date);


    --
    -- Name: ix_pivl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pivl_key ON process_instance_variable_log USING btree (business_key);


    --
    -- Name: ix_pivl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pivl_pid ON process_instance_variable_log USING btree (process_instance_id);


    --
    -- Name: ix_pivl_var_id; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_pivl_var_id ON process_instance_variable_log USING btree (variable_id);


    --
    -- Name: ix_tavl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_tavl_event_date ON task_instance_variable_log USING btree (event_date);


    --
    -- Name: ix_tavl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_tavl_key ON task_instance_variable_log USING btree (business_key);


    --
    -- Name: ix_tavl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_tavl_pid ON task_instance_variable_log USING btree (process_instance_id);


    --
    -- Name: ix_tavl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_tavl_utid ON task_instance_variable_log USING btree (user_task_instance_id);


    --
    -- Name: ix_utasl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utasl_event_date ON task_instance_assignment_log USING btree (event_date);


    --
    -- Name: ix_utasl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utasl_key ON task_instance_assignment_log USING btree (business_key);


    --
    -- Name: ix_utasl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utasl_pid ON task_instance_assignment_log USING btree (process_instance_id);


    --
    -- Name: ix_utasl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utasl_utid ON task_instance_assignment_log USING btree (user_task_instance_id);


    --
    -- Name: ix_utatl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utatl_event_date ON task_instance_attachment_log USING btree (event_date);


    --
    -- Name: ix_utatl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utatl_key ON task_instance_attachment_log USING btree (business_key);


    --
    -- Name: ix_utatl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utatl_pid ON task_instance_attachment_log USING btree (process_instance_id);


    --
    -- Name: ix_utatl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utatl_utid ON task_instance_attachment_log USING btree (user_task_instance_id);


    --
    -- Name: ix_utcl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utcl_event_date ON task_instance_comment_log USING btree (event_date);


    --
    -- Name: ix_utcl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utcl_key ON task_instance_comment_log USING btree (business_key);


    --
    -- Name: ix_utcl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utcl_pid ON task_instance_comment_log USING btree (process_instance_id);


    --
    -- Name: ix_utcl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utcl_utid ON task_instance_comment_log USING btree (user_task_instance_id);


    --
    -- Name: ix_utdl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utdl_event_date ON task_instance_deadline_log USING btree (event_date);


    --
    -- Name: ix_utdl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utdl_key ON task_instance_deadline_log USING btree (business_key);


    --
    -- Name: ix_utdl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utdl_pid ON task_instance_deadline_log USING btree (process_instance_id);


    --
    -- Name: ix_utdl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utdl_utid ON task_instance_deadline_log USING btree (user_task_instance_id);


    --
    -- Name: ix_utsl_event_date; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utsl_event_date ON task_instance_state_log USING btree (event_date);


    --
    -- Name: ix_utsl_key; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utsl_key ON task_instance_state_log USING btree (business_key);


    --
    -- Name: ix_utsl_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utsl_pid ON task_instance_state_log USING btree (process_instance_id);


    --
    -- Name: ix_utsl_state; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utsl_state ON task_instance_state_log USING btree (state);


    --
    -- Name: ix_utsl_utid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX ix_utsl_utid ON task_instance_state_log USING btree (user_task_instance_id);


    --
    -- Name: process_instance_state_roles_log fk_process_instance_state_pid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instance_state_roles_log
        ADD CONSTRAINT fk_process_instance_state_pid FOREIGN KEY (process_instance_state_log_id) REFERENCES process_instance_state_log(id);


    --
    -- Name: task_instance_assignment_users_log fk_task_instance_assignment_log_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_assignment_users_log
        ADD CONSTRAINT fk_task_instance_assignment_log_tid FOREIGN KEY (task_instance_assignment_log_id) REFERENCES task_instance_assignment_log(id);


    --
    -- Name: task_instance_deadline_notification_log fk_task_instance_deadline_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY task_instance_deadline_notification_log
        ADD CONSTRAINT fk_task_instance_deadline_tid FOREIGN KEY (task_instance_deadline_log_id) REFERENCES task_instance_deadline_log(id);


    --
    -- PostgreSQL database dump complete
    --
    END
    $$;

    DO $$
    BEGIN
    --
    -- Name: attachments; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE attachments (
        id character varying(255) NOT NULL,
        content character varying(255),
        name character varying(255),
        updated_at timestamp without time zone,
        updated_by character varying(255),
        task_id character varying(255) NOT NULL
    );


    --
    -- Name: comments; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE comments (
        id character varying(255) NOT NULL,
        content character varying(1000),
        updated_at timestamp without time zone,
        updated_by character varying(255),
        task_id character varying(255) NOT NULL
    );


    --
    -- Name: definitions; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions (
        id character varying(255) NOT NULL,
        version character varying(255) NOT NULL,
        name character varying(255),
        type character varying(255),
        source bytea,
        endpoint character varying(255),
        description character varying(255),
        metadata jsonb
    );


    --
    -- Name: definitions_addons; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions_addons (
        process_id character varying(255) NOT NULL,
        process_version character varying(255) NOT NULL,
        addon character varying(255) NOT NULL
    );


    --
    -- Name: definitions_annotations; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions_annotations (
        annotation character varying(255) NOT NULL,
        process_id character varying(255) NOT NULL,
        process_version character varying(255) NOT NULL
    );


    --
    -- Name: definitions_nodes; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions_nodes (
        id character varying(255) NOT NULL,
        name character varying(255),
        unique_id character varying(255),
        type character varying(255),
        process_id character varying(255) NOT NULL,
        process_version character varying(255) NOT NULL
    );


    --
    -- Name: definitions_nodes_metadata; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions_nodes_metadata (
        node_id character varying(255) NOT NULL,
        process_id character varying(255) NOT NULL,
        process_version character varying(255) NOT NULL,
        meta_value character varying(255),
        name character varying(255) NOT NULL
    );


    --
    -- Name: definitions_roles; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE definitions_roles (
        process_id character varying(255) NOT NULL,
        process_version character varying(255) NOT NULL,
        role character varying(255) NOT NULL
    );


    --
    -- Name: jobs; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jobs (
        id character varying(255) NOT NULL,
        callback_endpoint character varying(255),
        endpoint character varying(255),
        execution_counter integer,
        expiration_time timestamp without time zone,
        last_update timestamp without time zone,
        node_instance_id character varying(255),
        priority integer,
        process_id character varying(255),
        process_instance_id character varying(255),
        repeat_interval bigint,
        repeat_limit integer,
        retries integer,
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        scheduled_id character varying(255),
        status character varying(255)
    );


    --
    -- Name: kogito_data_cache; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE kogito_data_cache (
        var_name character varying(255) NOT NULL,
        cache_name character varying(255) NOT NULL,
        json_value jsonb
    );


    --
    -- Name: milestones; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE milestones (
        id character varying(255) NOT NULL,
        process_instance_id character varying(255) NOT NULL,
        name character varying(255),
        status character varying(255)
    );


    --
    -- Name: nodes; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE nodes (
        id character varying(255) NOT NULL,
        definition_id character varying(255),
        enter timestamp without time zone,
        exit timestamp without time zone,
        name character varying(255),
        node_id character varying(255),
        type character varying(255),
        process_instance_id character varying(255) NOT NULL,
        sla_due_date timestamp without time zone,
        retrigger boolean DEFAULT false,
        error_message character varying(65535)
    );


    --
    -- Name: processes; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE processes (
        id character varying(255) NOT NULL,
        business_key character varying(255),
        end_time timestamp without time zone,
        endpoint character varying(255),
        message character varying(65535),
        node_definition_id character varying(255),
        last_update_time timestamp without time zone,
        parent_process_instance_id character varying(255),
        process_id character varying(255),
        process_name character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        start_time timestamp without time zone,
        state integer,
        variables jsonb,
        version character varying(255),
        created_by character varying,
        updated_by character varying,
        sla_due_date timestamp without time zone,
        node_instance_id character varying(255),
        cloud_event_id character varying(1000),
        cloud_event_source character varying(1000)
    );


    --
    -- Name: processes_addons; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE processes_addons (
        process_id character varying(255) NOT NULL,
        addon character varying(255) NOT NULL
    );


    --
    -- Name: processes_roles; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE processes_roles (
        process_id character varying(255) NOT NULL,
        role character varying(255) NOT NULL
    );


    --
    -- Name: tasks; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks (
        id character varying(255) NOT NULL,
        actual_owner character varying(255),
        completed timestamp without time zone,
        description character varying(255),
        endpoint character varying(255),
        inputs jsonb,
        last_update timestamp without time zone,
        name character varying(255),
        outputs jsonb,
        priority character varying(255),
        process_id character varying(255),
        process_instance_id character varying(255),
        reference_name character varying(255),
        root_process_id character varying(255),
        root_process_instance_id character varying(255),
        started timestamp without time zone,
        state character varying(255),
        external_reference_id character varying(4000),
        sla_due_date timestamp without time zone
    );


    --
    -- Name: tasks_admin_groups; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks_admin_groups (
        task_id character varying(255) NOT NULL,
        group_id character varying(255) NOT NULL
    );


    --
    -- Name: tasks_admin_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks_admin_users (
        task_id character varying(255) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: tasks_excluded_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks_excluded_users (
        task_id character varying(255) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: tasks_potential_groups; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks_potential_groups (
        task_id character varying(255) NOT NULL,
        group_id character varying(255) NOT NULL
    );


    --
    -- Name: tasks_potential_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE tasks_potential_users (
        task_id character varying(255) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: attachments attachments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY attachments
        ADD CONSTRAINT attachments_pkey PRIMARY KEY (id);


    --
    -- Name: comments comments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY comments
        ADD CONSTRAINT comments_pkey PRIMARY KEY (id);


    --
    -- Name: definitions_addons definitions_addons_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_addons
        ADD CONSTRAINT definitions_addons_pkey PRIMARY KEY (process_id, process_version, addon);


    --
    -- Name: definitions_annotations definitions_annotations_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_annotations
        ADD CONSTRAINT definitions_annotations_pkey PRIMARY KEY (annotation, process_id, process_version);


    --
    -- Name: definitions_nodes_metadata definitions_nodes_metadata_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_nodes_metadata
        ADD CONSTRAINT definitions_nodes_metadata_pkey PRIMARY KEY (node_id, process_id, process_version, name);


    --
    -- Name: definitions_nodes definitions_nodes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_nodes
        ADD CONSTRAINT definitions_nodes_pkey PRIMARY KEY (id, process_id, process_version);


    --
    -- Name: definitions definitions_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions
        ADD CONSTRAINT definitions_pkey PRIMARY KEY (id, version);


    --
    -- Name: definitions_roles definitions_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_roles
        ADD CONSTRAINT definitions_roles_pkey PRIMARY KEY (process_id, process_version, role);


    --
    -- Name: jobs jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jobs
        ADD CONSTRAINT jobs_pkey PRIMARY KEY (id);


    --
    -- Name: kogito_data_cache kogito_data_cache_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY kogito_data_cache
        ADD CONSTRAINT kogito_data_cache_pkey PRIMARY KEY (var_name, cache_name);


    --
    -- Name: milestones milestones_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY milestones
        ADD CONSTRAINT milestones_pkey PRIMARY KEY (id, process_instance_id);


    --
    -- Name: nodes nodes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY nodes
        ADD CONSTRAINT nodes_pkey PRIMARY KEY (id);


    --
    -- Name: processes_addons processes_addons_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY processes_addons
        ADD CONSTRAINT processes_addons_pkey PRIMARY KEY (process_id, addon);


    --
    -- Name: processes processes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY processes
        ADD CONSTRAINT processes_pkey PRIMARY KEY (id);


    --
    -- Name: processes_roles processes_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY processes_roles
        ADD CONSTRAINT processes_roles_pkey PRIMARY KEY (process_id, role);


    --
    -- Name: tasks_admin_groups tasks_admin_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_admin_groups
        ADD CONSTRAINT tasks_admin_groups_pkey PRIMARY KEY (task_id, group_id);


    --
    -- Name: tasks_admin_users tasks_admin_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_admin_users
        ADD CONSTRAINT tasks_admin_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: tasks_excluded_users tasks_excluded_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_excluded_users
        ADD CONSTRAINT tasks_excluded_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: tasks tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks
        ADD CONSTRAINT tasks_pkey PRIMARY KEY (id);


    --
    -- Name: tasks_potential_groups tasks_potential_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_potential_groups
        ADD CONSTRAINT tasks_potential_groups_pkey PRIMARY KEY (task_id, group_id);


    --
    -- Name: tasks_potential_users tasks_potential_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_potential_users
        ADD CONSTRAINT tasks_potential_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: idx_attachments_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_attachments_tid ON attachments USING btree (task_id);


    --
    -- Name: idx_comments_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_comments_tid ON comments USING btree (task_id);


    --
    -- Name: idx_definitions_addons_pid_pv; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_definitions_addons_pid_pv ON definitions_addons USING btree (process_id, process_version);


    --
    -- Name: idx_definitions_annotations_pid_pv; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_definitions_annotations_pid_pv ON definitions_annotations USING btree (process_id, process_version);


    --
    -- Name: idx_definitions_nodes_metadata_pid_pv; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_definitions_nodes_metadata_pid_pv ON definitions_nodes_metadata USING btree (process_id, process_version);


    --
    -- Name: idx_definitions_nodes_pid_pv; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_definitions_nodes_pid_pv ON definitions_nodes USING btree (process_id, process_version);


    --
    -- Name: idx_definitions_roles_pid_pv; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_definitions_roles_pid_pv ON definitions_roles USING btree (process_id, process_version);


    --
    -- Name: idx_milestones_piid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_milestones_piid ON milestones USING btree (process_instance_id);


    --
    -- Name: idx_nodes_piid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_nodes_piid ON nodes USING btree (process_instance_id);


    --
    -- Name: idx_processes_addons_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_processes_addons_pid ON processes_addons USING btree (process_id);


    --
    -- Name: idx_processes_roles_pid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_processes_roles_pid ON processes_roles USING btree (process_id);


    --
    -- Name: idx_tasks_admin_groups_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_tasks_admin_groups_tid ON tasks_admin_groups USING btree (task_id);


    --
    -- Name: idx_tasks_admin_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_tasks_admin_users_tid ON tasks_admin_users USING btree (task_id);


    --
    -- Name: idx_tasks_excluded_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_tasks_excluded_users_tid ON tasks_excluded_users USING btree (task_id);


    --
    -- Name: idx_tasks_potential_groups_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_tasks_potential_groups_tid ON tasks_potential_groups USING btree (task_id);


    --
    -- Name: idx_tasks_potential_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_tasks_potential_users_tid ON tasks_potential_users USING btree (task_id);


    --
    -- Name: attachments fk_attachments_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY attachments
        ADD CONSTRAINT fk_attachments_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: comments fk_comments_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY comments
        ADD CONSTRAINT fk_comments_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: definitions_addons fk_definitions_addons_definitions; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_addons
        ADD CONSTRAINT fk_definitions_addons_definitions FOREIGN KEY (process_id, process_version) REFERENCES definitions(id, version) ON DELETE CASCADE;


    --
    -- Name: definitions_annotations fk_definitions_annotations; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_annotations
        ADD CONSTRAINT fk_definitions_annotations FOREIGN KEY (process_id, process_version) REFERENCES definitions(id, version) ON DELETE CASCADE;


    --
    -- Name: definitions_nodes fk_definitions_nodes_definitions; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_nodes
        ADD CONSTRAINT fk_definitions_nodes_definitions FOREIGN KEY (process_id, process_version) REFERENCES definitions(id, version) ON DELETE CASCADE;


    --
    -- Name: definitions_nodes_metadata fk_definitions_nodes_metadata_definitions_nodes; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_nodes_metadata
        ADD CONSTRAINT fk_definitions_nodes_metadata_definitions_nodes FOREIGN KEY (node_id, process_id, process_version) REFERENCES definitions_nodes(id, process_id, process_version) ON DELETE CASCADE;


    --
    -- Name: definitions_roles fk_definitions_roles_definitions; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY definitions_roles
        ADD CONSTRAINT fk_definitions_roles_definitions FOREIGN KEY (process_id, process_version) REFERENCES definitions(id, version) ON DELETE CASCADE;


    --
    -- Name: milestones fk_milestones_process; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY milestones
        ADD CONSTRAINT fk_milestones_process FOREIGN KEY (process_instance_id) REFERENCES processes(id) ON DELETE CASCADE;


    --
    -- Name: nodes fk_nodes_process; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY nodes
        ADD CONSTRAINT fk_nodes_process FOREIGN KEY (process_instance_id) REFERENCES processes(id) ON DELETE CASCADE;


    --
    -- Name: processes_addons fk_processes_addons_processes; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY processes_addons
        ADD CONSTRAINT fk_processes_addons_processes FOREIGN KEY (process_id) REFERENCES processes(id) ON DELETE CASCADE;


    --
    -- Name: processes_roles fk_processes_roles_processes; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY processes_roles
        ADD CONSTRAINT fk_processes_roles_processes FOREIGN KEY (process_id) REFERENCES processes(id) ON DELETE CASCADE;


    --
    -- Name: tasks_admin_groups fk_tasks_admin_groups_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_admin_groups
        ADD CONSTRAINT fk_tasks_admin_groups_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: tasks_admin_users fk_tasks_admin_users_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_admin_users
        ADD CONSTRAINT fk_tasks_admin_users_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: tasks_excluded_users fk_tasks_excluded_users_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_excluded_users
        ADD CONSTRAINT fk_tasks_excluded_users_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: tasks_potential_groups fk_tasks_potential_groups_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_potential_groups
        ADD CONSTRAINT fk_tasks_potential_groups_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- Name: tasks_potential_users fk_tasks_potential_users_tasks; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY tasks_potential_users
        ADD CONSTRAINT fk_tasks_potential_users_tasks FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE;


    --
    -- PostgreSQL database dump complete
    --
    END
    $$;

    DO $$
    BEGIN
    --
    -- Name: job_details; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE job_details (
        id character varying(50) NOT NULL,
        correlation_id character varying(50),
        status character varying(40),
        last_update timestamp with time zone,
        retries integer,
        execution_counter integer,
        scheduled_id character varying(40),
        priority integer,
        recipient jsonb,
        trigger jsonb,
        fire_time timestamp with time zone,
        execution_timeout bigint,
        execution_timeout_unit character varying(40),
        created timestamp with time zone
    );


    --
    -- Name: job_service_management; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE job_service_management (
        id character varying(40) NOT NULL,
        last_heartbeat timestamp with time zone,
        token character varying(40)
    );


    --
    -- Name: job_details job_details_pkey1; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY job_details
        ADD CONSTRAINT job_details_pkey1 PRIMARY KEY (id);


    --
    -- Name: job_service_management job_service_management_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY job_service_management
        ADD CONSTRAINT job_service_management_pkey PRIMARY KEY (id);


    --
    -- Name: job_service_management job_service_management_token_key; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY job_service_management
        ADD CONSTRAINT job_service_management_token_key UNIQUE (token);


    --
    -- Name: job_details_created_idx; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX job_details_created_idx ON job_details USING btree (created);


    --
    -- Name: job_details_fire_time_idx; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX job_details_fire_time_idx ON job_details USING btree (fire_time);


    --
    -- PostgreSQL database dump complete
    --
    END
    $$;

    DO $$
    BEGIN
    --
    -- Name: jbpm_user_tasks; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks (
        id character varying(50) NOT NULL,
        user_task_id character varying(255),
        task_priority character varying(50),
        actual_owner character varying(255),
        task_description character varying(255),
        status character varying(255),
        termination_type character varying(255),
        external_reference_id character varying(255),
        task_name character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_admin_groups; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_admin_groups (
        task_id character varying(50) NOT NULL,
        group_id character varying(255) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_admin_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_admin_users (
        task_id character varying(50) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_attachments; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_attachments (
        id character varying(50) NOT NULL,
        name character varying(255),
        updated_by character varying(255),
        updated_at timestamp(6) without time zone,
        url character varying(255),
        task_id character varying(50) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_comments; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_comments (
        id character varying(50) NOT NULL,
        updated_by character varying(255),
        updated_at timestamp(6) without time zone,
        comment character varying(1000),
        task_id character varying(50) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_deadline; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_deadline (
        id integer NOT NULL,
        task_id character varying(50) NOT NULL,
        notification_type character varying(255) NOT NULL,
        notification_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_deadline_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE jbpm_user_tasks_deadline_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: jbpm_user_tasks_deadline_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
    --

    ALTER SEQUENCE jbpm_user_tasks_deadline_seq OWNED BY jbpm_user_tasks_deadline.id;


    --
    -- Name: jbpm_user_tasks_deadline_timer; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_deadline_timer (
        task_id character varying(50) NOT NULL,
        notification_job_id character varying(255) NOT NULL,
        notification_type character varying(255) NOT NULL,
        notification_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_excluded_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_excluded_users (
        task_id character varying(50) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_inputs; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_inputs (
        task_id character varying(50) NOT NULL,
        input_name character varying(255) NOT NULL,
        input_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_metadata; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_metadata (
        task_id character varying(50) NOT NULL,
        metadata_name character varying(255) NOT NULL,
        metadata_value character varying(512),
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_outputs; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_outputs (
        task_id character varying(50) NOT NULL,
        output_name character varying(255) NOT NULL,
        output_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_potential_groups; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_potential_groups (
        task_id character varying(50) NOT NULL,
        group_id character varying(255) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_potential_users; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_potential_users (
        task_id character varying(50) NOT NULL,
        user_id character varying(255) NOT NULL
    );


    --
    -- Name: jbpm_user_tasks_reassignment; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_reassignment (
        id integer NOT NULL,
        task_id character varying(50) NOT NULL,
        reassignment_type character varying(255) NOT NULL,
        reassignment_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_reassignment_seq; Type: SEQUENCE; Schema: public; Owner: -
    --

    CREATE SEQUENCE jbpm_user_tasks_reassignment_seq
        START WITH 1
        INCREMENT BY 50
        NO MINVALUE
        NO MAXVALUE
        CACHE 1;


    --
    -- Name: jbpm_user_tasks_reassignment_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
    --

    ALTER SEQUENCE jbpm_user_tasks_reassignment_seq OWNED BY jbpm_user_tasks_reassignment.id;


    --
    -- Name: jbpm_user_tasks_reassignment_timer; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE jbpm_user_tasks_reassignment_timer (
        task_id character varying(50) NOT NULL,
        reassignment_job_id character varying(255) NOT NULL,
        reassignment_type character varying(255) NOT NULL,
        reassignment_value bytea,
        java_type character varying(255)
    );


    --
    -- Name: jbpm_user_tasks_admin_groups jbpm_user_tasks_admin_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_admin_groups
        ADD CONSTRAINT jbpm_user_tasks_admin_groups_pkey PRIMARY KEY (task_id, group_id);


    --
    -- Name: jbpm_user_tasks_admin_users jbpm_user_tasks_admin_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_admin_users
        ADD CONSTRAINT jbpm_user_tasks_admin_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: jbpm_user_tasks_attachments jbpm_user_tasks_attachments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_attachments
        ADD CONSTRAINT jbpm_user_tasks_attachments_pkey PRIMARY KEY (id);


    --
    -- Name: jbpm_user_tasks_comments jbpm_user_tasks_comments_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_comments
        ADD CONSTRAINT jbpm_user_tasks_comments_pkey PRIMARY KEY (id);


    --
    -- Name: jbpm_user_tasks_deadline jbpm_user_tasks_deadline_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_deadline
        ADD CONSTRAINT jbpm_user_tasks_deadline_pkey PRIMARY KEY (id);


    --
    -- Name: jbpm_user_tasks_deadline_timer jbpm_user_tasks_deadline_timer_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_deadline_timer
        ADD CONSTRAINT jbpm_user_tasks_deadline_timer_pkey PRIMARY KEY (task_id, notification_job_id);


    --
    -- Name: jbpm_user_tasks_excluded_users jbpm_user_tasks_excluded_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_excluded_users
        ADD CONSTRAINT jbpm_user_tasks_excluded_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: jbpm_user_tasks_inputs jbpm_user_tasks_inputs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_inputs
        ADD CONSTRAINT jbpm_user_tasks_inputs_pkey PRIMARY KEY (task_id, input_name);


    --
    -- Name: jbpm_user_tasks_metadata jbpm_user_tasks_metadata_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_metadata
        ADD CONSTRAINT jbpm_user_tasks_metadata_pkey PRIMARY KEY (task_id, metadata_name);


    --
    -- Name: jbpm_user_tasks_outputs jbpm_user_tasks_outputs_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_outputs
        ADD CONSTRAINT jbpm_user_tasks_outputs_pkey PRIMARY KEY (task_id, output_name);


    --
    -- Name: jbpm_user_tasks jbpm_user_tasks_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks
        ADD CONSTRAINT jbpm_user_tasks_pkey PRIMARY KEY (id);


    --
    -- Name: jbpm_user_tasks_potential_groups jbpm_user_tasks_potential_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_potential_groups
        ADD CONSTRAINT jbpm_user_tasks_potential_groups_pkey PRIMARY KEY (task_id, group_id);


    --
    -- Name: jbpm_user_tasks_potential_users jbpm_user_tasks_potential_users_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_potential_users
        ADD CONSTRAINT jbpm_user_tasks_potential_users_pkey PRIMARY KEY (task_id, user_id);


    --
    -- Name: jbpm_user_tasks_reassignment jbpm_user_tasks_reassignment_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_reassignment
        ADD CONSTRAINT jbpm_user_tasks_reassignment_pkey PRIMARY KEY (id);


    --
    -- Name: jbpm_user_tasks_reassignment_timer jbpm_user_tasks_reassignment_timer_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_reassignment_timer
        ADD CONSTRAINT jbpm_user_tasks_reassignment_timer_pkey PRIMARY KEY (task_id, reassignment_job_id);


    --
    -- Name: idx_jbpm_user_tasks_admin_groups_gid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_admin_groups_gid ON jbpm_user_tasks_admin_groups USING btree (group_id);


    --
    -- Name: idx_jbpm_user_tasks_admin_groups_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_admin_groups_tid ON jbpm_user_tasks_admin_groups USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_admin_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_admin_users_tid ON jbpm_user_tasks_admin_users USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_admin_users_uid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_admin_users_uid ON jbpm_user_tasks_admin_users USING btree (user_id);


    --
    -- Name: idx_jbpm_user_tasks_attachments_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_attachments_tid ON jbpm_user_tasks_attachments USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_deadline_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_deadline_tid ON jbpm_user_tasks_deadline USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_excluded_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_excluded_users_tid ON jbpm_user_tasks_excluded_users USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_excluded_users_uid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_excluded_users_uid ON jbpm_user_tasks_excluded_users USING btree (user_id);


    --
    -- Name: idx_jbpm_user_tasks_inputs_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_inputs_tid ON jbpm_user_tasks_inputs USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_metadata_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_metadata_tid ON jbpm_user_tasks_metadata USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_outputs_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_outputs_tid ON jbpm_user_tasks_outputs USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_potential_groups_gid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_potential_groups_gid ON jbpm_user_tasks_potential_groups USING btree (group_id);


    --
    -- Name: idx_jbpm_user_tasks_potential_groups_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_potential_groups_tid ON jbpm_user_tasks_potential_groups USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_potential_users_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_potential_users_tid ON jbpm_user_tasks_potential_users USING btree (task_id);


    --
    -- Name: idx_jbpm_user_tasks_potential_users_uid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_jbpm_user_tasks_potential_users_uid ON jbpm_user_tasks_potential_users USING btree (user_id);


    --
    -- Name: idx_usertasks_tid; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_usertasks_tid ON jbpm_user_tasks USING btree (user_task_id);


    --
    -- Name: jbpm_user_tasks_potential_users fk_jbpm_user_fk_tasks_potential_users_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_potential_users
        ADD CONSTRAINT fk_jbpm_user_fk_tasks_potential_users_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_admin_groups fk_jbpm_user_tasks_admin_groups_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_admin_groups
        ADD CONSTRAINT fk_jbpm_user_tasks_admin_groups_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_admin_users fk_jbpm_user_tasks_admin_users_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_admin_users
        ADD CONSTRAINT fk_jbpm_user_tasks_admin_users_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_deadline fk_jbpm_user_tasks_deadline_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_deadline
        ADD CONSTRAINT fk_jbpm_user_tasks_deadline_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_deadline_timer fk_jbpm_user_tasks_deadline_timer_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_deadline_timer
        ADD CONSTRAINT fk_jbpm_user_tasks_deadline_timer_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_excluded_users fk_jbpm_user_tasks_excluded_users_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_excluded_users
        ADD CONSTRAINT fk_jbpm_user_tasks_excluded_users_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_inputs fk_jbpm_user_tasks_inputs_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_inputs
        ADD CONSTRAINT fk_jbpm_user_tasks_inputs_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_metadata fk_jbpm_user_tasks_metadata_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_metadata
        ADD CONSTRAINT fk_jbpm_user_tasks_metadata_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_outputs fk_jbpm_user_tasks_outputs_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_outputs
        ADD CONSTRAINT fk_jbpm_user_tasks_outputs_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_potential_groups fk_jbpm_user_tasks_potential_groups_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_potential_groups
        ADD CONSTRAINT fk_jbpm_user_tasks_potential_groups_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_reassignment fk_jbpm_user_tasks_reassignment_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_reassignment
        ADD CONSTRAINT fk_jbpm_user_tasks_reassignment_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_reassignment_timer fk_jbpm_user_tasks_reassignment_timer_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_reassignment_timer
        ADD CONSTRAINT fk_jbpm_user_tasks_reassignment_timer_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_attachments fk_user_tasks_attachments_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_attachments
        ADD CONSTRAINT fk_user_tasks_attachments_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- Name: jbpm_user_tasks_comments fk_user_tasks_comments_tid; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY jbpm_user_tasks_comments
        ADD CONSTRAINT fk_user_tasks_comments_tid FOREIGN KEY (task_id) REFERENCES jbpm_user_tasks(id) ON DELETE CASCADE;


    --
    -- PostgreSQL database dump complete
    --
    END
    $$;

    DO $$
    BEGIN
    --
    -- Name: business_key_mapping; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE business_key_mapping (
        business_key character(255) NOT NULL,
        process_instance_id character(36) NOT NULL
    );


    --
    -- Name: correlation_instances; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE correlation_instances (
        id character(36) NOT NULL,
        encoded_correlation_id character varying(36) NOT NULL,
        correlated_id character varying(36) NOT NULL,
        correlation character varying NOT NULL,
        version bigint
    );


    --
    -- Name: event_types; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE event_types (
        process_instance_id character(36) NOT NULL,
        event_type character varying(256) NOT NULL
    );


    --
    -- Name: process_instances; Type: TABLE; Schema: public; Owner: -
    --

    CREATE TABLE process_instances (
        id character(36) NOT NULL,
        payload bytea NOT NULL,
        process_id character varying NOT NULL,
        version bigint,
        process_version character varying
    );


    --
    -- Name: business_key_mapping business_key_mapping_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY business_key_mapping
        ADD CONSTRAINT business_key_mapping_pkey PRIMARY KEY (business_key);


    --
    -- Name: correlation_instances correlation_instances_encoded_correlation_id_key; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY correlation_instances
        ADD CONSTRAINT correlation_instances_encoded_correlation_id_key UNIQUE (encoded_correlation_id);


    --
    -- Name: correlation_instances correlation_instances_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY correlation_instances
        ADD CONSTRAINT correlation_instances_pkey PRIMARY KEY (id);


    --
    -- Name: event_types event_types_pk; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY event_types
        ADD CONSTRAINT event_types_pk PRIMARY KEY (process_instance_id, event_type);


    --
    -- Name: process_instances process_instances_pkey; Type: CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY process_instances
        ADD CONSTRAINT process_instances_pkey PRIMARY KEY (id);


    --
    -- Name: idx_business_key_process_instance_id; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_business_key_process_instance_id ON business_key_mapping USING btree (process_instance_id);


    --
    -- Name: idx_correlation_instances_correlated_id; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_correlation_instances_correlated_id ON correlation_instances USING btree (correlated_id);


    --
    -- Name: idx_correlation_instances_encoded_id; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_correlation_instances_encoded_id ON correlation_instances USING btree (encoded_correlation_id);


    --
    -- Name: idx_process_instances_process_id; Type: INDEX; Schema: public; Owner: -
    --

    CREATE INDEX idx_process_instances_process_id ON process_instances USING btree (process_id, id, process_version);


    --
    -- Name: business_key_mapping fk_process_instances; Type: FK CONSTRAINT; Schema: public; Owner: -
    --

    ALTER TABLE ONLY business_key_mapping
        ADD CONSTRAINT fk_process_instances FOREIGN KEY (process_instance_id) REFERENCES process_instances(id) ON DELETE CASCADE;


    --
    -- PostgreSQL database dump complete
    --
    END
    $$;